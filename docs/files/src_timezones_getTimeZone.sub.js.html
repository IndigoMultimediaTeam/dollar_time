<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Documentation: $time@0.6.0</title>
    <link rel="stylesheet" href="../assets/from_yahhoapis/cssgrids-min.css">
<link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="../assets/from_yahhoapis/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png" width="117" height="52">$time</a>: src\timezones\getTimeZone.sub.js</h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.6.0</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Modules</h2>
                </div>
                <div class="bd">
                    <ul>
                    </ul>
                </div>
            </div>
            
            <div id="classes" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Classes</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="../classes/$time.{namespace}.html">$time.{namespace}</a></li>
                    </ul>
                </div>
            </div>
            
            <div id="elements" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Elements</h2>
                </div>
                <div class="bd">
                    <ul>
                    </ul>
                </div>
            </div>
            
            
            
            
            
            <div id="fileTree" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Files</h2>
                </div>
                <div class="bd">
                    <ul><li>src\$time.js/<ul></ul></li><li>src\$time_init.sub.js/<ul></ul></li><li>src\from_functions\fromDate.sub.js/<ul></ul></li><li>src\from_functions\fromDateArguments.sub.js/<ul></ul></li><li>src\from_functions\fromNow.sub.js/<ul></ul></li><li>src\from_functions\fromString.sub.js/<ul></ul></li><li>src\from_functions\toDateArray.sub.js/<ul></ul></li><li>src\modify\modify.sub.js/<ul></ul></li><li>src\timezones\getTimeZone.sub.js/<ul></ul></li><li>src\to_functions\helpers.sub.js/<ul></ul></li><li>src\to_functions\toDate.sub.js/<ul></ul></li><li>src\to_functions\toLocaleString.sub.js/<ul></ul></li><li>src\to_functions\toString.sub.js/<ul></ul></li><li>src\utility\double.sub.js/<ul></ul></li><li>src\utility\getDaysInMonth.sub.js/<ul></ul></li><li>src\utility\getMonthName.sub.js/<ul></ul></li><li>src\utility\getOrdinalSuffix.sub.js/<ul></ul></li></ul>
                </div>
            </div>
            
        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>src\timezones\getTimeZone.sub.js</h4>

<pre class="code prettyprint linenums">
/* jshint esversion: 6,-W097, -W040, browser: true, expr: true, undef: true */
/* init *//* global internal_locale, ary_ianna_time_zones, ary_ianna_time_offsets */
/* timezones/helpers *//* global getDateArrayFromMixed, getTimeZoneOffsetStringFromOffset */
/**
 * @method getTimeZone
 * @for $time.{namespace}
 * @param {DateArray} date
 *  - See [toDateArray](#methods_toDateArray).
 * @param {Object} parameters
 * @param {String} parameters.locale
 *  - **Default: internal_locale**
 * @param {String} parameters.description
 *  - **Default: &quot;long&quot;**
 *  - The representation of the time zone name. Possible values are:
 *      - &#x60;&quot;none&quot;&#x60; skip description
 *      - &#x60;&quot;long&quot;&#x60; (e.g., &#x60;British Summer Time&#x60;)
 *      - &#x60;&quot;short&quot;&#x60; (e.g., &#x60;GMT+1&#x60;)
 * @param {String} parameters.offset
 *  - **Default: false**
 *  - show offset part: &#x60;&quot;UTC+01:00 (…)&quot;&#x60; or &#x60;&quot;UTC+01:00&quot;&#x60; (if &#x60;description=&quot;none&quot;&#x60;)
 * @returns {String}
 *  - Timezone name/identificator (with offset)
 */
function getTimeZone(date, { locale= internal_locale, description= &quot;long&quot;, offset= false }= {}){
    description= description.toLocaleLowerCase();
    const [ date_part, time_part, offset_part ]= getDateArrayFromMixed(date), date_instance= new Date([ date_part, time_part, offset_part ].join(&quot;&quot;));
    const locale_param= Object.keys(ary_ianna_time_offsets).indexOf(offset_part)!==-1 ? { timeZone: ary_ianna_time_zones[ary_ianna_time_offsets[offset_part]] } : {};
    let out_description= description===&quot;none&quot; ? &quot;&quot; : date_instance.toLocaleString(locale, Object.assign({ timeZoneName: description }, locale_param)).replace(date_instance.toLocaleString(locale, locale_param), &quot;&quot;).trim();
    const out_offset= !offset ? &quot;&quot; : &quot;UTC&quot;+(offset_part===&quot;Z&quot; ? getTimeZoneOffsetStringFromOffset(date_instance.getTimezoneOffset()) : date_instance.toLocaleString(locale, Object.assign({ timeZoneName: &quot;short&quot; }, locale_param)).replace(date_instance.toLocaleString(locale, locale_param), &quot;&quot;).replace(/[^\d\+\-\:]/g, &quot;&quot;).trim());
    if(out_description&amp;&amp;out_offset) out_description= &quot; (&quot;+out_description+&quot;)&quot;;
    return out_offset+out_description;
}
/**
 * @method getCurrentTimeZone
 * @for $time.{namespace}
 * @param {Object} parameters
 * @param {String} parameters.locale
 *  - **Default: internal_locale**
 * @param {String} parameters.description
 *  - **Default: &quot;long&quot;**
 *  - The representation of the time zone name. Possible values are:
 *      - &#x60;&quot;none&quot;&#x60; skip description
 *      - &#x60;&quot;long&quot;&#x60; (e.g., &#x60;British Summer Time&#x60;)
 *      - &#x60;&quot;short&quot;&#x60; (e.g., &#x60;GMT+1&#x60;)
 *      - &#x60;&quot;ianna&quot;&#x60;/&#x60;&quot;IANNA&quot;&#x60; (e.g. &#x60;Europe/Prague&#x60;): &#x60;locale&#x60; has no effect for this
 * @param {String} parameters.offset
 *  - **Default: false**
 *  - show offset part: &#x60;&quot;UTC+01:00 (…)&quot;&#x60; or &#x60;&quot;UTC+01:00&quot;&#x60; (if &#x60;description=&quot;none&quot;&#x60;)
 * @returns {String}
 *  - Timezone name/identificator (with offset) for current timezone
 */
function getCurrentTimeZone({ locale= internal_locale, description= &quot;long&quot;, offset= false }= {}){
    description= description.toLocaleLowerCase();
    if(description!==&quot;ianna&quot;) return getTimeZone(undefined, { locale, description, offset });
    let out_description= &quot;&quot;, dtf;
    if(typeof Intl!==&#x27;undefined&#x27;&amp;&amp;typeof Intl.DateTimeFormat===&#x27;function&#x27;){
        dtf= Intl.DateTimeFormat() || {};
        if(typeof dtf.resolvedOptions!==&quot;function&quot;) return undefined;
        out_description= dtf.resolvedOptions().timeZone.replace(/_/g, &quot; &quot;);
    }
    const out_offset= !offset ? &quot;&quot; : getTimeZone(undefined, { locale, description: &quot;none&quot;, offset: true });
    if(out_description&amp;&amp;out_offset) out_description= &quot; (&quot;+out_description+&quot;)&quot;;
    return out_offset+out_description;
}
</pre>

</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>

</body>
</html>
